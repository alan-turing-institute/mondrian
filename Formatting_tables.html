<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Formatting tables</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Mondrian</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Creating_tables.html" class="tocviewlink" data-pltdoc="x">Creating tables</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Formatting_tables.html" class="tocviewselflink" data-pltdoc="x">Formatting tables</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Theory.html" class="tocviewlink" data-pltdoc="x">Theory</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-format%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">table-<wbr></wbr>format</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-pretty-print%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">table-<wbr></wbr>pretty-<wbr></wbr>print</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._mondrian%2Fmain..rkt%29._make-standard-rule-maker%29%29" class="tocsublink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>standard-<wbr></wbr>rule-<wbr></wbr>maker</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Creating_tables.html" title="backward to &quot;2 Creating tables&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Mondrian&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Theory.html" title="forward to &quot;4 Theory&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._.Formatting_tables)"></a>Formatting tables</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._mondrian/main..rkt)._table-format))"></a><span title="Provided from: mondrian | Package: mondrian"><span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-format%29%29" class="RktValDef RktValLink" data-pltdoc="x">table-format</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">table</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">listof</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Creating_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._.Table~3f%29%29" class="RktValLink" data-pltdoc="x">Table?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Format <span class="RktVar">table</span> into a list of rows, where each row is a list of strings. Cells
which span multiple columns or rows may be padded (either horizontally or vertically)
or trimmed (horizontally only). Note that if some cells span columns, the row lists
may not all have the same length; likewise, if a cell spans rows, then that cell
may be present in multiple rows.</div></p><p>The outcome is that the lowest-level cells will have their natural sizes whereas
row and column &lsquo;headers&rsquo; will have their size adjusted to match.</p><p>The actual rules governing the final widths of each cell are as follows (the
rules governing the heights of columns are identical, <span style="font-style: italic">mutatis
mutandis</span>). The <span style="font-style: italic">natural width</span> of a cell is the length of its contents;
the <span style="font-style: italic">natural height</span> of a cell is always 1.</p><ol><li><p>If this is a leaf cell, then assign it its natural width.</p></li><li><p>Otherwise, if all cells below this (in the column hierarchy) have zero
width, then the cell has its natural width.</p></li><li><p>Otherwise, the cell has a width equal to the sum of its spanned columns.</p></li></ol><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" cellpadding="0" class="prototype RForeground"><tr><td valign="top"><span class="RktPn">(</span><a name="(def._((lib._mondrian/main..rkt)._table-pretty-print))"></a><span title="Provided from: mondrian | Package: mondrian"><span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-pretty-print%29%29" class="RktValDef RktValLink" data-pltdoc="x">table-pretty-print</a></span></span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVar">table</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span><span class="RktOpt">[</span></td><td valign="top"><span class="RktPn">#:rule-maker</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-maker</span><span class="RktOpt">]</span><span class="RktPn">)</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">&rarr;</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktSym"><a href="https://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">table</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Creating_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._.Table~3f%29%29" class="RktValLink" data-pltdoc="x">Table?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;&nbsp;</span></td><td valign="top"><span class="RktVar">rule-maker</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">:</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span></span></td></tr><tr><td><span class="RktSym"><a href="https://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-nonnegative-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._exact-nonnegative-integer~3f%29%29" class="RktValLink" data-pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/characters.html#%28def._%28%28quote._~23~25kernel%29._char~3f%29%29" class="RktValLink" data-pltdoc="x">char?</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top">=</td><td valign="top"><span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktPn">(</span><span class="RktSym">default-rule-maker</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Format <span class="RktVar">table</span> as a single string, including line breaks, with row and column &lsquo;rules.&rsquo;</div></p><p>Rules are characters which are inserted between columns and between rows. The
particular character that is inserted depends upon the &lsquo;depth&rsquo; of the rows or
columns to either side. The default rule-maker is equivalent to
<span class="RktPn">(</span><span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._make-standard-rule-maker%29%29" class="RktValLink" data-pltdoc="x">make-standard-rule-maker</a></span><span class="stt"> </span><span class="RktVal">"-"</span><span class="stt"> </span><span class="RktVal">"|"</span><span class="RktPn">)</span> and inserts &lsquo;<span class="stt">|</span>&rsquo; between the
columns and &lsquo;<span class="stt">-</span>&rsquo; between the rows; intersections use the &lsquo;highest-level&rsquo;
rule and ties are broken in favour of vertical rules.</p><p>Note that rules are not placed around the edges of the table by default. To have
outside rules, the table should have empty cells to the left and right, or top
and bottom.</p><p>In general, <span class="RktVar">rule-maker</span> should be a procedure that accepts two
non-negative integers, the row depth and the column depth, and returns either a
<span class="RktSym"><a href="https://docs.racket-lang.org/reference/characters.html#%28def._%28%28quote._~23~25kernel%29._char~3f%29%29" class="RktValLink" data-pltdoc="x">char?</a></span> or <span class="RktVal">#f</span>. If the row depth (respectively, the column depth)
is <span class="RktVal">#f</span> then the procedure should return a vertical (respectively,
horizontal) separator. If both are non-false, then the procedure should return
an intersection character. The procedure may return <span class="RktVal">#f</span> in which case no
rule is inserted.</p><p>Internally, <span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-pretty-print%29%29" class="RktValLink" data-pltdoc="x">table-pretty-print</a></span> creates a new table by splicing in cells
containing the rules and then running the result through <span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-format%29%29" class="RktValLink" data-pltdoc="x">table-format</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._mondrian/main..rkt)._make-standard-rule-maker))"></a><span title="Provided from: mondrian | Package: mondrian"><span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._make-standard-rule-maker%29%29" class="RktValDef RktValLink" data-pltdoc="x">make-standard-rule-maker</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">hchars</span><span class="hspace">&nbsp;</span><span class="RktVar">vchars</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/procedures.html#%28def._%28%28quote._~23~25kernel%29._procedure~3f%29%29" class="RktValLink" data-pltdoc="x">procedure?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">hchars</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">vchars</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a procedure suitable for passing to <span class="RktSym"><a href="Formatting_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-pretty-print%29%29" class="RktValLink" data-pltdoc="x">table-pretty-print</a></span> to
generate the appropriate column- and row-separators.</div></p><p><span class="RktVar">hchars</span> should be a string of characters, from &lsquo;highest&rsquo; to &lsquo;lowest&rsquo; in
the hierarchy of columns; likewise for <span class="RktVar">vchars</span>.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Creating_tables.html" title="backward to &quot;2 Creating tables&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Mondrian&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Theory.html" title="forward to &quot;4 Theory&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>