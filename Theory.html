<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>4&nbsp;Theory</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {document.write('<scr' + 'ipt type="text/javascript" src="MathJax/MathJax.js?config=default"></scr' + 'ipt>');})();
</script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Mondrian</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Overview.html" class="tocviewlink" data-pltdoc="x">Overview</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Creating_tables.html" class="tocviewlink" data-pltdoc="x">Creating tables</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Formatting_tables.html" class="tocviewlink" data-pltdoc="x">Formatting tables</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Theory.html" class="tocviewselflink" data-pltdoc="x">Theory</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Formatting_tables.html" title="backward to &quot;3 Formatting tables&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Mondrian&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>4<tt>&nbsp;</tt><a name="(part._.Theory)"></a>Theory</h3><p>The kinds of tables that mondrian deals with are two-dimensional, rectangular
arrays of cells where certain cells might span more than one row or
column. However, not all such arrangements are allowed: the rows (or columns)
spanned must be &lsquo;consistent&rsquo; throughout the table. In effect, there is a tree
structure on both the rows and the columns which the cells must respect. We call
such a consistent structure a &lsquo;<a href="Theory.html#%28tech._mondrian%29" class="techoutside" data-pltdoc="x"><span class="techinside">mondrian</span></a>.&rsquo;</p><p><div class="SIntrapara">For example, the following two rectangular arrangements are <span class="emph">not</span> legal
tables:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">|-------+-------|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|-------+-------|</span></p></td></tr><tr><td><p><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">A</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">B</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">A</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">B</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">:---+---+---|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|---+---+---+---|</span></p></td></tr><tr><td><p><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">: b | c : d |</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| a : b | c : d |</span></p></td></tr><tr><td><p><span class="stt">|---+---+---+---|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|---+---+---+---|</span></p></td></tr><tr><td><p><span class="stt">| e : f | g : h |</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">| e :</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">C</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">: h |</span></p></td></tr><tr><td><p><span class="stt">|---+---+---+---|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|---+---+---+---|</span></p></td></tr></table></div><div class="SIntrapara">The problem with the first one is that cell &lsquo;A&rsquo; is not rectangular; the
problem with the second is that the column structure is &lsquo;inconsistent&rsquo; so that
cell &lsquo;C&rsquo; overlaps cells &lsquo;A&rsquo; and &lsquo;B&rsquo;.</div></p><p><div class="SIntrapara">On the other hand, the following table is legal:
</div><div class="SIntrapara"><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">|---------+---------|</span></p></td></tr><tr><td><p><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">aA</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="stt">bA</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">|</span></p></td></tr><tr><td><p><span class="stt">|----:----+----+----|</span></p></td></tr><tr><td><p><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: dC | eC : fC |</span></p></td></tr><tr><td><p><span class="stt">| cB +----+----+----|</span></p></td></tr><tr><td><p><span class="stt">|</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="stt">: dD | eD : fD |</span></p></td></tr><tr><td><p><span class="stt">|----+----+----+----|</span></p></td></tr></table></div></p><p><div class="SIntrapara">The columns have a hierarchical structure described by the tree:
</div><div class="SIntrapara"><blockquote class="SCentered"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="146.0" height="106.0"/></p></blockquote></div></p><p><div class="SIntrapara">and the rows by the tree:
</div><div class="SIntrapara"><blockquote class="SCentered"><p><img style="vertical-align: -0.0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="106.0" height="106.0"/></p></blockquote></div></p><p>Any legal cell in the table is identified by a pair consisting of a node of the
column structure and a node of the row structure. However, not every collection
of legal cells is a legal table: the cells must (a) not overlap; and (b) cover
the entire rectangular area.</p><p>Let <span class="math">R</span> and <span class="math">C</span> be finite trees (representing a row and column
structure respectively). For, say, <span class="math">r_1, r_2 \in R</span>, we write <span class="math">r_1 \leq r_2</span>
if <span class="math">r_1</span> is closer to the root of the tree than <span class="math">r_2</span>. Denote by <span class="math">R
\times_\leq C</span> the partial order on <span class="math">R\times C</span> given by the rule <span class="math">(r, c)
\leq (r&rsquo;, c&rsquo;)</span> if and only if <span class="math">r \leq r&rsquo;</span> and <span class="math">c \leq c&rsquo;</span>.</p><p>An element <span class="math">c\in R \times_\leq C</span> is a potential cell in the table. This cell
may cover other possible cells. By the <span style="font-style: italic">interior</span> of <span class="math">c</span>, written
<span class="math">\mathcal{I}(c)</span>, is meant the set <span class="math">\mathcal{I}(c)\equiv \{ i\in
R\times_\leq C\mid c\leq i\}</span>. Note that the interior of a cell also includes
the cell.</p><p>A <a name="(tech._mondrian)"></a><span style="font-style: italic">mondrian</span> is a set, <span class="math">M\subset R\times_\leq C</span>, such that:</p><ol><li><p>For any two elements <span class="math">m, n\in M</span>, we have <span class="math">\mathcal{I}(m)\cap
\mathcal{I}(n)=\emptyset</span>; and</p></li><li><p><span class="math">M</span> is maximal in the sense that it is not a proper subset of any other
set satisfying the first condition.</p></li></ol><p>The first condition ensures that no two cells overlap; the second ensures that,
taken together, the cells cover the entire table.</p><p>The functions <span class="RktSym"><a href="Creating_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-row%29%29" class="RktValLink" data-pltdoc="x">table-row</a></span>, <span class="RktSym"><a href="Creating_tables.html#%28def._%28%28lib._mondrian%2Fmain..rkt%29._table-col%29%29" class="RktValLink" data-pltdoc="x">table-col</a></span>, and so on create new
tables by joining existing tables, either side-by-side or top-to-bottom. Two
tables joined in this way must have a consistent row- or column-structure. The
tables are said to be row-wise (or column-wise) <a name="(tech._coherent)"></a><span style="font-style: italic">coherent</span> if one of
their row (or column) structures is a prefix of the other. In this case,
mondrian extends the smaller tree from the leaves.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Formatting_tables.html" title="backward to &quot;3 Formatting tables&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Mondrian&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>